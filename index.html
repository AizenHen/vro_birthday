<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Happy Birthday My Love</title>
<style>
  :root{
    --overlay-bg: rgba(0,0,0,0.6);
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body {
    margin:0;
    font-family: 'Arial', sans-serif;
    color: white;
    text-align: center;
    overflow-x: hidden;
    background: #000;
  }

  /* Fullscreen background slideshow */
  #bg-slideshow {
    position: fixed;
    inset: 0;
    z-index: -1;
    overflow: hidden;
    background: #000;
  }
  #bg-slideshow img{
    position:absolute;
    inset:0;
    width:100%;
    height:100%;
    object-fit:contain;           /* show full image centered */
    object-position:center center;
    background-color:#000;
    opacity:0;
    transition: opacity 1.2s ease-in-out;
    filter: brightness(0.9);
  }
  #bg-slideshow img.active{ opacity: 1; }

  .container {
    background-color: var(--overlay-bg);
    padding: 20px;
    border-radius: 20px;
    width: min(900px, 92%);
    margin: 40px auto;
    animation: fadeIn 1.0s ease-in-out;
    backdrop-filter: blur(2px);
  }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(14px); }
    to { opacity: 1; transform: translateY(0); }
  }

  h1 {
    color: pink;
    text-shadow: 0 0 10px rgba(255, 105, 180, 0.8);
    animation: sparkle 3s infinite ease-in-out;
    margin-top: 10px;
    margin-bottom: 18px;
  }
  @keyframes sparkle {
    0%, 100% { text-shadow: 0 0 10px #ff69b4; }
    50% { text-shadow: 0 0 22px #fff, 0 0 36px #ffb6c1; }
  }

  button {
    background-color: #ff69b4;
    color: white;
    padding: 10px 20px;
    margin: 8px;
    border: none;
    border-radius: 12px;
    cursor: pointer;
    transition: transform 0.15s ease, box-shadow 0.15s ease;
    box-shadow: 0 4px 10px rgba(0,0,0,0.25);
  }
  button:hover { background-color: #ff85c1; transform: translateY(-1px); }
  .answer-btn{ display:inline-block; min-width: 240px; }

  .correct { background-color: #1f9d55 !important; } /* ×™×¨×•×§ */
  .incorrect { background-color: #e3342f !important; } /* ××“×•× */

  #submit { margin-top: 26px; }
  #result { font-size: 20px; margin-top: 26px; color: #ffe082; }
  .final { margin-top: 38px; font-size: 22px; }
  .hearts { color: red; font-size: 28px; font-weight: bold; }

  /* Falling hearts for feedback */
  .heart-fall {
    position: fixed;
    top: -10px;
    font-size: 26px;
    pointer-events: none;
    animation: fall 5s linear forwards;
    z-index: 5;
  }
  @keyframes fall {
    0% { transform: translateY(-10px) rotate(0deg); opacity: 1; }
    100% { transform: translateY(100vh) rotate(360deg); opacity: 0; }
  }

  /* Music button */
  #musicButton {
    position: fixed;
    top: 10px; left: 10px;
    background-color: rgba(255, 255, 255, 0.28);
    color: white;
    border: none; border-radius: 10px;
    padding: 10px 14px; cursor: pointer; font-size: 16px;
    display: none;
    z-index: 6;
  }

  /* Moments launcher */
  #momentsLauncher{
    position: fixed;
    bottom: 16px; left: 16px;
    z-index: 6;
    background: rgba(255,255,255,0.18);
    border: 1px solid rgba(255,255,255,0.28);
    backdrop-filter: blur(2px);
  }

  /* Modal gallery */
  .modal {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.72);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 10;
    padding: 24px;
  }
  .modal.open{ display:flex; }
  .modal-card{
    width: min(1100px, 96vw);
    max-height: 90vh;
    overflow:auto;
    background: rgba(20,20,20,0.9);
    border-radius: 16px;
    padding: 18px;
    box-shadow: 0 10px 40px rgba(0,0,0,0.4);
  }
  .modal-header{
    display:flex; align-items:center; justify-content:space-between;
    margin-bottom: 12px;
  }
  .close-btn{
    background:#ff477e; padding:8px 14px; border-radius:10px;
  }
  .grid{
    display:grid;
    grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
    gap:10px;
  }
  .grid img{
    width:100%; height:220px; object-fit:cover; border-radius:12px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.3);
    transition: transform 0.2s ease;
    cursor: zoom-in;
  }
  .grid img:hover{ transform: scale(1.02); }

  /* Lightbox */
  #lightbox{
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.9);
    display:none;
    align-items:center;
    justify-content:center;
    z-index: 20;
    padding: 20px;
  }
  #lightbox.open{ display:flex; }
  #lightbox img{
    max-width: 96vw;
    max-height: 92vh;
    object-fit: contain;
    border-radius: 12px;
    box-shadow: 0 10px 40px rgba(0,0,0,0.6);
  }
  .nav-btn{
    position: fixed;
    top: 50%;
    transform: translateY(-50%);
    background: rgba(255,255,255,0.18);
    border: 1px solid rgba(255,255,255,0.3);
    padding: 10px 14px;
    border-radius: 10px;
    cursor: pointer;
    z-index: 21;
  }
  #prevBtn{ left: 16px; }
  #nextBtn{ right: 16px; }
</style>
</head>

<body>
  <!-- Background slideshow holder -->
  <div id="bg-slideshow"></div>

  <!-- ××•×–×™×§×” -->
  <audio id="bgMusic" src="music.mp3" loop></audio>
  <button id="musicButton">× ×’×Ÿ ××•×–×™×§×” ğŸµ</button>

  <!-- Moments launcher -->
  <button id="momentsLauncher">×”×¨×’×¢×™× ×©×œ× ×• ğŸ“·</button>

  <!-- Moments modal -->
  <div id="momentsModal" class="modal" aria-hidden="true">
    <div class="modal-card">
      <div class="modal-header">
        <h2 style="margin:0">×”×¨×’×¢×™× ×©×œ× ×• ğŸ’</h2>
        <button id="closeModal" class="close-btn">×¡×’×•×¨</button>
      </div>
      <div id="momentsGrid" class="grid"></div>
    </div>
  </div>

  <!-- Lightbox for full-size view -->
  <div id="lightbox" aria-hidden="true">
    <button id="prevBtn" class="nav-btn">âŸ¨</button>
    <img id="lightboxImg" src="" alt="×”×¨×’×¢ ×©×œ× ×•">
    <button id="nextBtn" class="nav-btn">âŸ©</button>
  </div>

  <div class="container">
    <h1>ğŸ’– ×™×•× ×”×•×œ×“×ª 33 ×©××— ×œ×•×‘×•×‘ ×××™×” ğŸ’–</h1>

    <div id="quiz"></div>
    <button id="submit" style="display:none">×¡×™×™× ×•×‘×“×•×§ ×ª×•×¦××•×ª</button>

    <div id="result"></div>
    <div class="final" id="final"></div>
  </div>

  <script>
    /* ------------------ CONFIG with your images ------------------ */
    const qBackgrounds = [
      ['1.jpg','1.jpg','1.jpg','1.jpg'], // Q1
      ['2.jpg','2.jpg','2.jpg','2.jpg'], // Q2
      ['3.jpg','3.jpg','3.jpg','3.jpg'], // Q3
      ['4.jpg','4.jpg','4.jpg','4.jpg'], // Q4
      ['5.jpg','5.jpg','5.jpg','5.jpg'], // Q5
    ];

    const momentsImages = [
      '1A.jpg','2A.jpg','3A.jpg','4A.jpg','5A.jpg','6A.jpg'
    ];
    /* ------------------------------------------------------------- */

    const questions = [
      { q: '××” ×”×¨×’×©×ª ×”×¤×¢× ×”×¨××©×•× ×” ×©×¨××™×ª ××•×ª×™?', answers: ['××›×•×¢×¨ ×›×–×” ××™×›×¡', '××¤×¡ ×××•×¤×¡', '×™×©×¨ ×™×“×¢×ª×™ ×©× ×™×”×™×” ×‘×™×—×“ ×•×× ×™ ××”×‘×ª ×—×™×™×š'], correct: 2 },
      { q: '×›××” ××ª ××•×”×‘×ª ××•×ª×™ × 1 ×¢×“ 10?', answers: ['0 ×× ×™ ×©×•× ××ª ××•×ª×š', '×‘×—×™×™× ×œ× ××”×‘×ª×™ ××•×ª×š', '×–×“×™×™×Ÿ ×œ×™ ××”×—×™×™×', '××™× ×¡×•×£'], correct: 3 },
      { q: '×”×× ××ª ×©××—×” ×©×”×›×¨×ª ××•×ª×™?', answers: ['×œ×', '××ª×” ×”×“×‘×¨ ×”×›×™ ×˜×•×‘ ×©×§×¨×” ×œ×™ ×•×× ×™ ×œ× ××•×›× ×” ×œ×”×•×“×•×ª ×‘×–×”', '××™×Ÿ ×ª×©×•×‘×” × ×›×•× ×”'], correct: 1 },
      { q: '×× ×”×™×™×ª×™ ×’××“ ×”×™×™×ª ××•×”×‘×ª ××•×ª×™?', answers: ['×œ×', '×›×Ÿ ××‘×œ ×–×” ×”×™×” ××—×¨×™×“', '×œ×, ××‘×œ ×‘×—×™×™× ×œ× ×”×™×™×ª×™ ××•×•×ª×¨×ª ××ª ×¢×œ ××”×‘×” ×©×œ× ×• ×œ× ××©× ×” ××”'], correct: 2 },
      { q: '×”×× ××ª ×¨×•×¦×” ×œ×§×‘×œ ××ª ×”××ª× ×” ×”××—×¨×•× ×” ×©×œ×š?', answers: ['×‘×¨×•×¨ ×™× ×˜××‘×œ ×ª×‘×™× ×œ×™ ××•×ª×” ×›×‘×¨', '×œ×', '×›×Ÿ'], correct: 0 }
    ];

    const quizDiv = document.getElementById('quiz');
    const submitBtn = document.getElementById('submit');
    let currentQuestion = 0, score = 0;

    /* ------------ Background slideshow logic ------------ */
    let slideTimer = null;
    const slideHolder = document.getElementById('bg-slideshow');

    function setupSlideshow(images){
      slideHolder.innerHTML = '';
      if(slideTimer){ clearInterval(slideTimer); slideTimer = null; }

      images.forEach((src, i) => {
        const img = document.createElement('img');
        img.src = src;
        if(i === 0) img.classList.add('active');
        slideHolder.appendChild(img);
      });

      const slides = Array.from(slideHolder.querySelectorAll('img'));
      let idx = 0;
      slideTimer = setInterval(() => {
        slides[idx].classList.remove('active');
        idx = (idx + 1) % slides.length;
        slides[idx].classList.add('active');
      }, 2800);
    }

    /* ------------ Quiz rendering ------------ */
    function showQuestion(i) {
      const q = questions[i];
      const bgSet = qBackgrounds[i] || [];
      if(bgSet.length) setupSlideshow(bgSet);

      quizDiv.innerHTML = `<h3>${i + 1}. ${q.q}</h3>`;
      q.answers.forEach((ans, idx) => {
        const btn = document.createElement('button');
        btn.className = 'answer-btn';
        btn.innerText = ans;
        btn.addEventListener('click', () => handleAnswer(btn, idx, q.correct));
        quizDiv.appendChild(btn);
      });
      quizDiv.style.opacity = 0;
      setTimeout(() => quizDiv.style.opacity = 1, 160);
    }

    function handleAnswer(clickedBtn, selected, correct) {
      const allBtns = quizDiv.querySelectorAll('button');
      allBtns.forEach(b => b.disabled = true);

      if (selected === correct) {
        clickedBtn.classList.add('correct');
        score += 20;
        createFallingHearts('â¤ï¸');
      } else {
        clickedBtn.classList.add('incorrect');
        createFallingHearts('ğŸ’”');
      }

      currentQuestion++;
      if (currentQuestion < questions.length) {
        setTimeout(() => showQuestion(currentQuestion), 1100);
      } else {
        quizDiv.innerHTML = '<h2>×¢× ×™×ª ×¢×œ ×›×œ ×”×©××œ×•×ª ğŸ’•</h2>';
        submitBtn.style.display = 'inline-block';
      }
    }

    /* Falling hearts on answer feedback */
    function createFallingHearts(symbol) {
      for (let i = 0; i < 24; i++) {
        const heart = document.createElement('div');
        heart.classList.add('heart-fall');
        heart.innerHTML = symbol;
        heart.style.left = Math.random() * 100 + 'vw';
        heart.style.animationDuration = (3 + Math.random() * 2) + 's';
        heart.style.color = symbol === 'ğŸ’”' ? 'red' : 'pink';
        document.body.appendChild(heart);
        setTimeout(() => heart.remove(), 5200);
      }
    }

    submitBtn.addEventListener('click', () => {
      document.getElementById('result').innerHTML = `×§×™×‘×œ×ª ${score} ××ª×•×š 100!`;
      document.getElementById('final').innerHTML = `
        ×–×” ×œ× ××©× ×” ×›××” ×§×™×‘×œ×ª, ×× ×™ ××•×”×‘ ××•×ª×š ×•×–×” ×”×›×™ ×—×©×•×‘.<br>
        ××ª ××”×‘×ª ×—×™×™, ×–××™×” ×©×œ×™ ×ª×•×“×” ×¢×œ ××™ ×©××ª ×•××” ×©××ª â¤ï¸<br>
        ×× ×™ ××•×“×” ×œ××œ×•×”×™× ×©×™×© ×œ×™ ××•×ª×š! ××ª ×”×—×™×™× ×©×œ×™ ×•××ª ×”××© ×©×œ×™ ×•×× ×™ ×‘×—×™×™× ×œ× ××©×¨×•×“ ×‘×œ×¢×“×™×™×š!<br>
        ×ª×•×“×” ×œ×š ×¢×œ ×”×›×œ ×œ×•×‘×•×‘ ×××™×” ×‘×××ª ğŸ’‹<br>
        ×ª×•×“×” ×©××× ×©×œ×š ×”×‘×™××” ××•×ª×š ×œ×¢×•×œ× â€“ 33 ×©× ×” ×©×œ ××•×©×¨ ×•×©××—×”! ğŸ‰<br>
        ×× ×™ ×¨×•×¦×” ×œ×”×’×™×“ ×‘××•×ª×” × ×©×™××” ×©×× ×™ ××¦×˜×¢×¨ ×¢×œ ×›×œ ×”×—×¨× ×©×”××›×œ×ª×™ ××•×ª×š ğŸ’”<br>
        ××ª ×”×“×‘×¨ ×”×›×™ ×˜×•×‘ ×©×§×¨×” ×œ×™ ×•×× ×™ ××¦×˜×¢×¨ ×©×œ× ×”×¨××ª×™ ××ª ×–×” ×ª××™×“!<br>
        ××–×œ ×˜×•×‘ ×œ×•×‘×•×‘ ×××™×” ğŸ’– ××§×•×•×” ×©××”×‘×ª ××ª ×”××ª× ×” ×”×–××ª ğŸ’<br>
        ×¢×‘×“×ª×™ ×¢×œ×™×” ×”×¨×‘×” ×–××Ÿ ğŸ˜˜<br><br>
        <span class='hearts'>â¤ï¸ To Infinity and Beyond â¤ï¸</span>`;
      createFallingHearts('â¤ï¸');
    });

    // start first question + its slideshow
    showQuestion(currentQuestion);

    /* ------------ Music autoplay with fallback ------------ */
    const music = document.getElementById('bgMusic');
    const musicButton = document.getElementById('musicButton');
    setTimeout(() => {
      music.play().catch(() => { musicButton.style.display = 'block'; });
    }, 3000);
    musicButton.addEventListener('click', () => {
      music.play();
      musicButton.style.display = 'none';
    });

    /* ------------ Moments modal + Lightbox ------------ */
    const launcher = document.getElementById('momentsLauncher');
    const modal = document.getElementById('momentsModal');
    const closeModal = document.getElementById('closeModal');
    const momentsGrid = document.getElementById('momentsGrid');

    function renderMoments(){
      momentsGrid.innerHTML = '';
      momentsImages.forEach((src, idx) => {
        const img = document.createElement('img');
        img.src = src;
        img.alt = '×”×¨×’×¢ ×©×œ× ×•';
        img.dataset.index = idx;
        img.addEventListener('click', () => openLightbox(idx));
        momentsGrid.appendChild(img);
      });
    }
    renderMoments();

    launcher.addEventListener('click', () => {
      modal.classList.add('open');
      modal.setAttribute('aria-hidden', 'false');
    });
    closeModal.addEventListener('click', () => {
      modal.classList.remove('open');
      modal.setAttribute('aria-hidden', 'true');
    });
    modal.addEventListener('click', (e) => {
      if(e.target === modal){
        modal.classList.remove('open');
        modal.setAttribute('aria-hidden', 'true');
      }
    });

    // Lightbox logic
    const lightbox = document.getElementById('lightbox');
    const lightboxImg = document.getElementById('lightboxImg');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    let currentLbIndex = 0;

    function openLightbox(index){
      currentLbIndex = index;
      lightboxImg.src = momentsImages[currentLbIndex];
      lightbox.classList.add('open');
      lightbox.setAttribute('aria-hidden','false');
    }
    function closeLightbox(){
      lightbox.classList.remove('open');
      lightbox.setAttribute('aria-hidden','true');
    }
    function showPrev(){
      currentLbIndex = (currentLbIndex - 1 + momentsImages.length) % momentsImages.length;
      lightboxImg.src = momentsImages[currentLbIndex];
    }
    function showNext(){
      currentLbIndex = (currentLbIndex + 1) % momentsImages.length;
      lightboxImg.src = momentsImages[currentLbIndex];
    }

    prevBtn.addEventListener('click', showPrev);
    nextBtn.addEventListener('click', showNext);
    lightbox.addEventListener('click', (e) => { if(e.target === lightbox) closeLightbox(); });
    document.addEventListener('keydown', (e) => {
      if(!lightbox.classList.contains('open')) return;
      if(e.key === 'Escape') closeLightbox();
      if(e.key === 'ArrowLeft') showPrev();
      if(e.key === 'ArrowRight') showNext();
    });
  </script>
</body>
</html>
