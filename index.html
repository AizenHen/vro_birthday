<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Veronika — Birthday Surprise (Single File)</title>
<style>
  :root{ --overlay-bg: rgba(0,0,0,0.6); }
  *{ box-sizing:border-box }
  html,body{ height:100% }
  body{
    margin:0; font-family: 'Arial', sans-serif; color:white; text-align:center;
    overflow-x:hidden; background:#000;
  }

  /* Splash screen */
  #splash{
    position:fixed; inset:0; display:flex; flex-direction:column;
    align-items:center; justify-content:center; background:#000; z-index:100;
    opacity:1; transition: opacity 600ms ease;
  }
  #splash h1{ color:pink; margin:0 20px; line-height:1.6; font-size:26px;
    text-shadow:0 0 10px rgba(255,105,180,.85);
    animation: sparkle 3s infinite ease-in-out;
  }
  @keyframes sparkle{
    0%,100%{ text-shadow:0 0 10px #ff69b4 }
    50%{ text-shadow:0 0 22px #fff, 0 0 36px #ffb6c1 }
  }
  .hidden{ display:none !important; }

  /* Password screen */
  #password-screen{
    position:fixed; inset:0; display:none; flex-direction:column;
    align-items:center; justify-content:center;
    background: radial-gradient(circle, rgba(255,182,193,0.16), rgba(0,0,0,0.96));
    z-index:90;
  }
  #password-screen h2{ color:pink; margin:0 0 10px; }
  #passwordInput{
    padding:10px; border-radius:8px; border:none; width:240px; text-align:center;
  }
  #enterBtn{
    margin-top:10px; padding:8px 18px; background:#ff69b4; color:white;
    border:none; border-radius:10px; cursor:pointer;
  }
  #enterBtn:hover{ background:#ff85c1; }
  #errorMsg{ color:#ff8080; margin-top:10px; min-height:22px; }

  /* Hearts rain overlay (for password success) */
  .heart-fall{
    position:fixed; top:-10px; font-size:28px; pointer-events:none;
    animation: fall 3s linear forwards; z-index:95;
  }
  @keyframes fall{
    0%{ transform: translateY(-10px) rotate(0deg); opacity:1 }
    100%{ transform: translateY(100vh) rotate(360deg); opacity:0 }
  }

  /* Background slideshow behind app */
  #bg-slideshow{
    position:fixed; inset:0; z-index:-1; overflow:hidden; background:#000;
  }
  #bg-slideshow img{
    position:absolute; inset:0; width:100%; height:100%;
    object-fit:contain; object-position:center center; background-color:#000;
    opacity:0; transition: opacity 1.2s ease-in-out; filter: brightness(0.9);
  }
  #bg-slideshow img.active{ opacity:1; }

  /* App container */
  .container{
    background-color:var(--overlay-bg); padding:20px; border-radius:20px;
    width:min(900px,92%); margin:40px auto; backdrop-filter: blur(2px);
    animation: fadeIn 1.0s ease-in-out;
  }
  @keyframes fadeIn{ from{opacity:0; transform:translateY(14px)} to{opacity:1; transform:translateY(0)} }

  h1{ color:pink; text-shadow:0 0 10px rgba(255,105,180,.8); margin:10px 0 18px; }

  button{
    background:#ff69b4; color:white; padding:10px 20px; margin:8px; border:none;
    border-radius:12px; cursor:pointer; transition: transform .15s, box-shadow .15s;
    box-shadow:0 4px 10px rgba(0,0,0,.25);
  }
  button:hover{ background:#ff85c1; transform: translateY(-1px); }
  .answer-btn{ display:inline-block; min-width:240px; }

  .correct{ background:#1f9d55 !important; }  /* ירוק */
  .incorrect{ background:#e3342f !important; } /* אדום */

  #submit{ margin-top:26px }
  #result{ font-size:20px; margin-top:26px; color:#ffe082 }
  .final{ margin-top:38px; font-size:22px }
  .hearts{ color:red; font-size:28px; font-weight:bold }

  /* Music button */
  #musicButton{
    position: fixed; top:10px; left:10px; background:rgba(255,255,255,.28);
    color:white; border:none; border-radius:10px; padding:10px 14px; cursor:pointer;
    font-size:16px; display:none; z-index:6;
  }

  /* Moments launcher */
  #momentsLauncher{
    position: fixed; bottom:16px; left:16px; z-index:6;
    background: rgba(255,255,255,0.18);
    border: 1px solid rgba(255,255,255,0.28);
    backdrop-filter: blur(2px);
  }

  /* Modal gallery */
  .modal{
    position:fixed; inset:0; background:rgba(0,0,0,.72); display:none;
    align-items:center; justify-content:center; z-index:10; padding:24px;
  }
  .modal.open{ display:flex }
  .modal-card{
    width:min(1100px,96vw); max-height:90vh; overflow:auto; background:rgba(20,20,20,.9);
    border-radius:16px; padding:18px; box-shadow:0 10px 40px rgba(0,0,0,.4);
  }
  .modal-header{ display:flex; align-items:center; justify-content:space-between; margin-bottom:12px; }
  .close-btn{ background:#ff477e; padding:8px 14px; border-radius:10px; }

  .grid{ display:grid; grid-template-columns:repeat(auto-fill,minmax(180px,1fr)); gap:10px; }
  .grid img{
    width:100%; height:220px; object-fit:cover; border-radius:12px;
    box-shadow:0 4px 10px rgba(0,0,0,.3); transition: transform .2s; cursor:zoom-in;
  }
  .grid img:hover{ transform:scale(1.02) }

  /* Lightbox */
  #lightbox{
    position:fixed; inset:0; background:rgba(0,0,0,.9); display:none;
    align-items:center; justify-content:center; z-index:20; padding:20px;
  }
  #lightbox.open{ display:flex }
  #lightbox img{
    max-width:96vw; max-height:92vh; object-fit:contain; border-radius:12px;
    box-shadow:0 10px 40px rgba(0,0,0,.6);
  }
  .nav-btn{
    position:fixed; top:50%; transform:translateY(-50%);
    background:rgba(255,255,255,.18); border:1px solid rgba(255,255,255,.3);
    padding:10px 14px; border-radius:10px; cursor:pointer; z-index:21;
  }
  #prevBtn{ left:16px } #nextBtn{ right:16px }

  /* Hide app until unlocked */
  #app{ visibility:hidden }
</style>
</head>
<body>

<!-- Splash -->
<div id="splash">
  <h1>ברוכה הבאה לובוב מאיה 💖<br>זה היום הולדת שלך ואת תהני ממנו!</h1>
</div>

<!-- Password screen -->
<div id="password-screen" aria-hidden="true">
  <h2>הכנסי סיסמה כדי להיכנס 🔐</h2>
  <input type="password" id="passwordInput" placeholder="18/10/2025">
  <button id="enterBtn">היכנסי</button>
  <div id="errorMsg"></div>
</div>

<!-- Hearts will render above during unlock -->
<button id="musicButton">נגן מוזיקה 🎵</button>
<button id="momentsLauncher" class="hidden">הרגעים שלנו 📷</button>

<!-- Moments modal -->
<div id="momentsModal" class="modal" aria-hidden="true">
  <div class="modal-card">
    <div class="modal-header">
      <h2 style="margin:0">הרגעים שלנו 💞</h2>
      <button id="closeModal" class="close-btn">סגור</button>
    </div>
    <div id="momentsGrid" class="grid"></div>
  </div>
</div>

<!-- Lightbox -->
<div id="lightbox" aria-hidden="true">
  <button id="prevBtn" class="nav-btn">⟨</button>
  <img id="lightboxImg" src="" alt="הרגע שלנו">
  <button id="nextBtn" class="nav-btn">⟩</button>
</div>

<!-- Background slideshow -->
<div id="bg-slideshow"></div>

<!-- App -->
<div id="app">
  <div class="container">
    <h1>💖 יום הולדת 33 שמח לובוב מאיה 💖</h1>
    <div id="quiz"></div>
    <button id="submit" style="display:none">סיים ובדוק תוצאות</button>
    <div id="result"></div>
    <div class="final" id="final"></div>
  </div>
  <audio id="bgMusic" src="music.mp3" loop></audio>
</div>

<script>
  /* ------------------ CONFIG ------------------ */
  const PASSWORD = "18/10/2025";
  const qBackgrounds = [
    ['1.jpg','1.jpg','1.jpg','1.jpg'], // Q1
    ['2.jpg','2.jpg','2.jpg','2.jpg'], // Q2
    ['3.jpg','3.jpg','3.jpg','3.jpg'], // Q3
    ['4.jpg','4.jpg','4.jpg','4.jpg'], // Q4
    ['5.jpg','5.jpg','5.jpg','5.jpg'], // Q5
  ];
  const momentsImages = ['1A.jpg','2A.jpg','3A.jpg','4A.jpg','5A.jpg','6A.jpg'];
  /* -------------------------------------------- */

  /* Splash -> Password */
  const splash = document.getElementById('splash');
  const pwdScreen = document.getElementById('password-screen');
  setTimeout(() => {
    splash.style.opacity = 0;
    setTimeout(()=> { splash.classList.add('hidden'); pwdScreen.style.display = 'flex'; }, 650);
  }, 3000);

  /* Hearts helper */
  function heartRain(durationMs = 3000, color='red'){
    const end = Date.now() + durationMs;
    (function spawn(){
      for(let i=0;i<14;i++){
        const h = document.createElement('div');
        h.className = 'heart-fall'; h.textContent = '❤️';
        h.style.left = Math.random()*100 + 'vw';
        h.style.animationDuration = (2.4 + Math.random()*1.2) + 's';
        h.style.color = color;
        document.body.appendChild(h);
        setTimeout(()=>h.remove(), 3200);
      }
      if(Date.now() < end) requestAnimationFrame(spawn);
    })();
  }

  /* Password logic */
  const input = document.getElementById('passwordInput');
  const enterBtn = document.getElementById('enterBtn');
  const errorMsg = document.getElementById('errorMsg');
  const app = document.getElementById('app');
  const music = document.getElementById('bgMusic');
  const musicButton = document.getElementById('musicButton');
  const momentsLauncher = document.getElementById('momentsLauncher');

  function unlock(){
    pwdScreen.style.display = 'none';
    heartRain(3000, 'red');
    setTimeout(()=>{
      app.style.visibility = 'visible';
      momentsLauncher.classList.remove('hidden');
      // try autoplay after visible
      setTimeout(()=>{
        music.play().catch(()=>{ musicButton.style.display = 'block'; });
      }, 3000);
    }, 3000);
  }

  function checkPassword(){
    const val = (input.value || '').trim();
    if (val.toLowerCase() === PASSWORD.toLowerCase()){
      unlock();
    } else {
      errorMsg.textContent = "💔 סיסמה שגויה, נסי שוב";
      input.value = "";
      input.focus();
    }
  }
  enterBtn.addEventListener('click', checkPassword);
  input.addEventListener('keydown', e => { if(e.key === 'Enter') checkPassword(); });

  /* Background slideshow */
  let slideTimer = null;
  const slideHolder = document.getElementById('bg-slideshow');
  function setupSlideshow(images){
    slideHolder.innerHTML = '';
    if(slideTimer){ clearInterval(slideTimer); slideTimer = null; }
    images.forEach((src,i)=>{
      const img = document.createElement('img'); img.src = src;
      if(i===0) img.classList.add('active'); slideHolder.appendChild(img);
    });
    const slides = Array.from(slideHolder.querySelectorAll('img'));
    let idx = 0;
    slideTimer = setInterval(()=>{
      slides[idx].classList.remove('active');
      idx = (idx+1) % slides.length;
      slides[idx].classList.add('active');
    }, 2800);
  }

  /* Quiz */
  const questions = [
    { q: 'מה הרגשת הפעם הראשונה שראית אותי?', answers: ['מכוער כזה איכס','אפס מאופס','ישר ידעתי שניהיה ביחד ואני אהבת חייך'], correct:2 },
    { q: 'כמה את אוהבת אותי מ 1 עד 10?', answers: ['0 אני שונאת אותך','בחיים לא אהבתי אותך','זדיין לי מהחיים','אינסוף'], correct:3 },
    { q: 'האם את שמחה שהכרת אותי?', answers: ['לא','אתה הדבר הכי טוב שקרה לי ואני לא מוכנה להודות בזה','אין תשובה נכונה'], correct:1 },
    { q: 'אם הייתי גמד היית אוהבת אותי?', answers: ['לא','כן אבל זה היה מחריד','לא, אבל בחיים לא הייתי מוותרת את על אהבה שלנו לא משנה מה'], correct:2 },
    { q: 'האם את רוצה לקבל את המתנה האחרונה שלך?', answers: ['ברור יא טמבל תביא לי אותה כבר','לא','כן'], correct:0 },
  ];
  const quizDiv = document.getElementById('quiz');
  const submitBtn = document.getElementById('submit');
  let currentQuestion = 0, score = 0;

  function showQuestion(i){
    const q = questions[i];
    const bgSet = qBackgrounds[i] || [];
    if(bgSet.length) setupSlideshow(bgSet);
    quizDiv.innerHTML = `<h3>${i+1}. ${q.q}</h3>`;
    q.answers.forEach((ans, idx)=>{
      const btn = document.createElement('button');
      btn.className='answer-btn'; btn.innerText = ans;
      btn.addEventListener('click', ()=>handleAnswer(btn, idx, q.correct));
      quizDiv.appendChild(btn);
    });
    quizDiv.style.opacity = 0; setTimeout(()=>quizDiv.style.opacity=1, 160);
  }

  function createFallingHearts(symbol){
    for(let i=0;i<24;i++){
      const heart = document.createElement('div');
      heart.className='heart-fall'; heart.textContent = symbol;
      heart.style.left = Math.random()*100 + 'vw';
      heart.style.animationDuration = (3 + Math.random()*2) + 's';
      heart.style.color = symbol==='💔' ? 'red' : 'pink';
      document.body.appendChild(heart);
      setTimeout(()=>heart.remove(), 5200);
    }
  }

  function handleAnswer(clickedBtn, selected, correct){
    const allBtns = quizDiv.querySelectorAll('button'); allBtns.forEach(b=>b.disabled=true);
    if(selected === correct){ clickedBtn.classList.add('correct'); score += 20; createFallingHearts('❤️'); }
    else { clickedBtn.classList.add('incorrect'); createFallingHearts('💔'); }
    currentQuestion++;
    if(currentQuestion < questions.length) setTimeout(()=>showQuestion(currentQuestion), 1100);
    else { quizDiv.innerHTML = '<h2>ענית על כל השאלות 💕</h2>'; submitBtn.style.display='inline-block'; }
  }

  submitBtn.addEventListener('click', ()=>{
    document.getElementById('result').innerHTML = `קיבלת ${score} מתוך 100!`;
    document.getElementById('final').innerHTML = `
      זה לא משנה כמה קיבלת, אני אוהב אותך וזה הכי חשוב.<br>
      את אהבת חיי, זאיה שלי תודה על מי שאת ומה שאת ❤️<br>
      אני מודה לאלוהים שיש לי אותך! את החיים שלי ואת האש שלי ואני בחיים לא אשרוד בלעדייך!<br>
      תודה לך על הכל לובוב מאיה באמת 💋<br>
      תודה שאמא שלך הביאה אותך לעולם – 33 שנה של אושר ושמחה! 🎉<br>
      אני רוצה להגיד באותה נשימה שאני מצטער על כל החרא שהאכלתי אותך 💔<br>
      את הדבר הכי טוב שקרה לי ואני מצטער שלא הראתי את זה תמיד!<br>
      מזל טוב לובוב מאיה 💖 מקווה שאהבת את המתנה הזאת 💝<br>
      עבדתי עליה הרבה זמן 😘<br><br>
      <span class='hearts'>❤️ To Infinity and Beyond ❤️</span>`;
    createFallingHearts('❤️');
  });

  // Moments modal + Lightbox
  const launcher = document.getElementById('momentsLauncher');
  const modal = document.getElementById('momentsModal');
  const closeModal = document.getElementById('closeModal');
  const momentsGrid = document.getElementById('momentsGrid');
  function renderMoments(){
    momentsGrid.innerHTML = '';
    momentsImages.forEach((src, idx)=>{
      const img = document.createElement('img'); img.src = src; img.alt = 'הרגע שלנו';
      img.addEventListener('click', ()=>openLightbox(idx));
      momentsGrid.appendChild(img);
    });
  }
  function openLightbox(index){
    lbIndex = index;
    lightboxImg.src = momentsImages[lbIndex];
    lightbox.classList.add('open'); lightbox.setAttribute('aria-hidden','false');
  }
  function closeLightbox(){ lightbox.classList.remove('open'); lightbox.setAttribute('aria-hidden','true'); }
  let lbIndex = 0;
  const lightbox = document.getElementById('lightbox');
  const lightboxImg = document.getElementById('lightboxImg');
  const prevBtn = document.getElementById('prevBtn'); const nextBtn = document.getElementById('nextBtn');
  function showPrev(){ lbIndex = (lbIndex - 1 + momentsImages.length) % momentsImages.length; lightboxImg.src = momentsImages[lbIndex]; }
  function showNext(){ lbIndex = (lbIndex + 1) % momentsImages.length; lightboxImg.src = momentsImages[lbIndex]; }
  prevBtn.addEventListener('click', showPrev); nextBtn.addEventListener('click', showNext);
  lightbox.addEventListener('click', e => { if(e.target === lightbox) closeLightbox(); });
  document.addEventListener('keydown', e => {
    if(!lightbox.classList.contains('open')) return;
    if(e.key==='Escape') closeLightbox();
    if(e.key==='ArrowLeft') showPrev();
    if(e.key==='ArrowRight') showNext();
  });
  launcher.addEventListener('click', ()=>{ modal.classList.add('open'); modal.setAttribute('aria-hidden','false'); });
  closeModal.addEventListener('click', ()=>{ modal.classList.remove('open'); modal.setAttribute('aria-hidden','true'); });
  modal.addEventListener('click', e => { if(e.target===modal){ modal.classList.remove('open'); modal.setAttribute('aria-hidden','true'); }});

  // Render gallery up-front
  renderMoments();

  // Start first question when app becomes visible (after unlock)
  // But we can prep it right away; it's hidden until unlock
  let initialized = false;
  function initApp(){
    if(initialized) return;
    initialized = true;
    showQuestion(0);
  }
  initApp();

  // Music manual fallback
  musicButton.addEventListener('click', ()=>{ music.play(); musicButton.style.display='none'; });
</script>



<style>
  #arrowFullPage {
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: url('5.jpg') center/cover no-repeat;
    display: none;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    color: white;
    text-align: center;
    overflow: hidden;
    z-index: 9999;
  }
  #arrowFullPage h2 {
    margin-bottom: 20px;
    text-shadow: 0 0 8px black;
    font-size: 28px;
  }
  .arrow-container-final {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 25px;
  }
  .arrow-item-final {
    width: 110px;
    height: 110px;
    border-radius: 50%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    font-size: 58px;
    cursor: pointer;
    transition: transform 0.2s ease;
  }
  .arrow-item-final:hover { transform: scale(1.1); }
  #arrow5Final.locked { opacity: 0.4; pointer-events: none; }
  #homeBtnFinal {
    margin-top: 30px;
    background: #ff69b4;
    border: none;
    border-radius: 12px;
    color: white;
    padding: 12px 20px;
    font-size: 18px;
    display: none;
    cursor: pointer;
  }
</style>

<div id="arrowFullPage">
  <h2>בחרי את אחד החצים 💖</h2>
  <div class="arrow-container-final">
    <div class="arrow-item-final" id="arrow1Final" style="background:red;">➤<small>1</small></div>
    <div class="arrow-item-final" id="arrow2Final" style="background:pink;">➤<small>2</small></div>
    <div class="arrow-item-final" id="arrow3Final" style="background:purple;">➤<small>3</small></div>
    <div class="arrow-item-final" id="arrow4Final" style="background:blue;">➤<small>4</small></div>
    <div class="arrow-item-final locked" id="arrow5Final" style="background:green;">➤<small>5</small></div>
  </div>
  <button id="homeBtnFinal">חזרה למסך בית 🏠</button>
  <audio id="arrowSound" src="https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg"></audio>
</div>

<script>
(function(){
  const finalEl = document.getElementById('final');
  const arrowPage = document.getElementById('arrowFullPage');
  const body = document.body;
  const homeBtn = document.getElementById('homeBtnFinal');
  const clicked = {1:false,2:false,3:false,4:false,5:false};
  const arrow5 = document.getElementById('arrow5Final');
  const sound = document.getElementById('arrowSound');

  function clickArrow(num){
    if(num===5 && (!clicked[1]||!clicked[2]||!clicked[3]||!clicked[4])){
      alert('קודם תלחצי על ארבעת החצים הראשונים 💖');
      return;
    }
    clicked[num]=true;
    sound.play();
    alert('תעקבי אחרי החץ והמספר');
    if(clicked[1] && clicked[2] && clicked[3] && clicked[4]){
      arrow5.classList.remove('locked');
      arrow5.style.opacity='1';
    }
    if(clicked[1]&&clicked[2]&&clicked[3]&&clicked[4]&&clicked[5]){
      homeBtn.style.display='inline-block';
    }
  }

  ['arrow1Final','arrow2Final','arrow3Final','arrow4Final','arrow5Final'].forEach(id=>{
    const el=document.getElementById(id);
    if(el) el.addEventListener('click',()=>clickArrow(Number(id.replace('arrow','').replace('Final',''))));
  });

  homeBtn.addEventListener('click',()=>{
    location.reload();
  });

  // After final message appears, add continue button after 8 seconds
  if(finalEl){
    const observer = new MutationObserver(()=>{
      if(finalEl.innerText.trim().length>0){
        observer.disconnect();
        setTimeout(()=>{
          const btn=document.createElement('button');
          btn.textContent='המשיכי הלאה זאיה שלי 💕';
          btn.style.cssText='margin:20px;padding:10px 20px;border-radius:10px;background:#ff69b4;color:white;font-size:18px;cursor:pointer;';
          finalEl.appendChild(btn);
          btn.addEventListener('click',()=>{
            document.querySelectorAll('body > *:not(#arrowFullPage)').forEach(el=>el.style.display='none');
            body.style.overflow='hidden';
            arrowPage.style.display='flex';
          });
        },8000);
      }
    });
    observer.observe(finalEl,{childList:true,subtree:true,characterData:true});
  }
})();
</script>

</body>
</html>
